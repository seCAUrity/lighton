<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LightOn</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup">
    <!-- Header -->
    <header class="popup__header">
      <div class="popup__logo">
        <span class="popup__logo-icon">💡</span>
        <div class="popup__logo-text">
          <h1 class="popup__title">LightOn</h1>
          <p class="popup__subtitle" data-i18n="popupSubtitle">다크패턴 탐지기</p>
        </div>
      </div>
      <label class="popup__toggle">
        <input type="checkbox" id="enableToggle" checked>
        <span class="popup__toggle-slider"></span>
      </label>
    </header>

    <!-- Status -->
    <section class="popup__status" id="statusSection">
      <div class="popup__status-icon" id="statusIcon">✓</div>
      <p class="popup__status-text" id="statusText">검사 중...</p>
    </section>

    <!-- Results -->
    <section class="popup__results" id="resultsSection">
      <h2 class="popup__results-title" data-i18n="detectedCount">탐지된 패턴</h2>

      <div class="popup__counts">
        <div class="popup__count popup__count--high" id="highCount" style="display: none;">
          <span class="popup__count-number">0</span>
          <span class="popup__count-label" data-i18n="severityHigh">높음</span>
        </div>
        <div class="popup__count popup__count--medium" id="mediumCount" style="display: none;">
          <span class="popup__count-number">0</span>
          <span class="popup__count-label" data-i18n="severityMedium">중간</span>
        </div>
        <div class="popup__count popup__count--low" id="lowCount" style="display: none;">
          <span class="popup__count-number">0</span>
          <span class="popup__count-label" data-i18n="severityLow">낮음</span>
        </div>
      </div>

      <!-- Pattern List -->
      <ul class="popup__list" id="patternList">
        <!-- Patterns will be inserted here -->
      </ul>
    </section>

    <!-- No Patterns -->
    <section class="popup__empty" id="emptySection" style="display: none;">
      <div class="popup__empty-icon">✨</div>
      <p class="popup__empty-text" data-i18n="noPatterns">이 페이지에서 다크패턴이 발견되지 않았습니다.</p>
    </section>

    <!-- Disabled State -->
    <section class="popup__disabled" id="disabledSection" style="display: none;">
      <div class="popup__disabled-icon">🌙</div>
      <p class="popup__disabled-text">LightOn이 비활성화되어 있습니다.</p>
    </section>

    <!-- Secession Info (Collapsible) -->
    <section class="popup__secession" id="secessionSection" style="display: none;">
      <div class="secession__trigger" id="secessionTrigger">
        <div class="secession__trigger-left">
          <span class="secession__icon">🚪</span>
          <span class="secession__trigger-text" id="secessionTitleText">계정 탈퇴 정보</span>
        </div>
        <span class="secession__trigger-arrow" id="secessionArrow">▼</span>
      </div>

      <div class="secession__body" id="secessionBody" style="display: none;">
        <!-- Loading State -->
        <div class="secession__loading" id="secessionLoading" style="display: none;">
          <div class="secession__spinner"></div>
          <p id="secessionLoadingText">정보 조회 중...</p>
        </div>

        <!-- Content -->
        <div class="secession__content" id="secessionContent" style="display: none;">
          <div class="secession__service">
            <strong id="secessionServiceName">Service</strong>
          </div>

          <div class="secession__difficulty-container">
            <span class="secession__difficulty" id="secessionDifficulty">
              <span class="secession__difficulty-icon">⚠️</span>
              <span class="secession__difficulty-text">중간</span>
            </span>
          </div>

          <p class="secession__notes" id="secessionNotes"></p>

          <a href="#" class="secession__action" id="secessionAction" target="_blank" rel="noopener noreferrer">
            <span id="secessionActionText">탈퇴 가이드 보기</span>
            <span class="secession__action-arrow">→</span>
          </a>
        </div>

        <!-- Not Found State -->
        <div class="secession__not-found" id="secessionNotFound" style="display: none;">
          <p class="secession__not-found-text" id="secessionNotFoundText">
            이 사이트의 탈퇴 정보를 찾을 수 없습니다.
          </p>
        </div>

        <!-- Error State -->
        <div class="secession__error" id="secessionError" style="display: none;">
          <p class="secession__error-text" id="secessionErrorText">
            정보를 불러올 수 없습니다.
          </p>
          <button class="secession__retry" id="secessionRetry">
            <span>🔄</span> <span id="secessionRetryText">다시 시도</span>
          </button>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="popup__footer">
      <button class="popup__rescan" id="rescanBtn" title="다시 검사">
        <span>🔄</span> 다시 검사
      </button>
      <span class="popup__version">v1.0.0</span>
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>
